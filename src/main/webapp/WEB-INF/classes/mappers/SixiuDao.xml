<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.scch.muke.dao.SixiuDao">
  <!-- 一对一关系 -->
  <sql id="sixiuFields">
    id,
    user_id userId,
    xulun,
    chap1,
    chap2,
    chap3,
    chap4,
    chap5,
    chap6,
    chap7,
    chap8,
    chap1_exam chap1Exam,
    chap2_exam chap2Exam,
    chap3_exam chap3Exam,
    chap4_exam chap4Exam,
    chap5_exam chap5Exam,
    chap6_exam chap6Exam
  </sql>
  

  
  <select id="getSixiuByUserId" parameterType="Integer" resultType="Sixiu">
    select
    <include refid="sixiuFields" />
    from sixiu
    where
    user_id = #{userId}
  </select>
  
  <!-- 更新用户学习、测试情况 -->
  <update id="updateSixiu" parameterType="Sixiu">
    update sixiu
    set
    
    <if test="xulun!=null and xulun!=''">
      xulun=#{xulun},
    </if>
    
    <if test="chap1!=null and chap1!=''">
      chap1=#{chap1},
    </if>
    
    user_id = #{userId}
    
    where user_id = #{userId}
  </update>
  
  <insert id="insertSixiu" parameterType="Sixiu" useGeneratedKeys="true" keyProperty="id">
      insert into sixiu(user_id) values(#{userId})
  </insert>

</mapper>